function showLabel(e,o,a){var t="#"+e;$(t).addClass(a).removeClass("d-none"),$(t).fadeIn(),$(t).text(o),window.setTimeout(function(){$(t).fadeOut("slow","swing"),$(t).addClass("d-none").removeClass(a).text("")},2e3)}function showDiv(e,o){$("#"+o+" #"+e).removeClass("d-none")}function hideDiv(e){$(e).addClass("d-none")}function validateForm(e){return $("#"+e).validate()}function clearForm(e){$("#"+e)[0].reset()}function onChangeCompanyCode(e){var o=e.selectedCompanyCode,a=e.formID,t=e.account;o&&$.ajax({type:"GET",url:"/get-changecompanycode_list",data:{},success:function(r){var c=r.glAccount_list;if("customer"==t){var n=r.customer_List;$("#"+a+" #companyName").empty(),$("#"+a+" #companyName").append("<option selected disabled> Choose... </option>"),n.forEach(function(e){e.customerCompanyCode==o&&$("#"+a+" #companyName").append('<option value="'+e._id+'">'+e.customerCode+" -  "+e.customerName+"</option>")})}else if("vendor"==t){n=r.vendor_List;$("#"+a+" #companyName").empty(),$("#"+a+" #companyName").append("<option selected disabled> Choose... </option>"),n.forEach(function(e){e.vendorCompanyCode==o&&$("#"+a+" #companyName").append('<option value="'+e._id+'">'+e.vendorCode+" -  "+e.vendorName+"</option>")})}else if("gl"==t){var l=r.customer_List,i=r.vendor_List;$("#"+a+" #companyName").empty(),$("#"+a+" #companyName").append("<option selected disabled> Choose... </option>"),l.forEach(function(e){e.customerCompanyCode==o&&$("#"+a+" #companyName").append('<option value="'+e._id+'">'+e.customerCode+" -  "+e.customerName+"</option>")}),i.forEach(function(e){e.vendorCompanyCode==o&&$("#"+a+" #companyName").append('<option value="'+e._id+'">'+e.vendorCode+" -  "+e.vendorName+"</option>")})}e.companyName?$("#rpvd-create #companyName").val(e.companyName):($("#"+a+"-tbody").find("tr:first").find("input,select").val(""),$("#"+a+"-tbody").find("tr:gt(0)").remove(),$("#"+a+"-tbody").find("tr:first").find(".gl_Account").empty().append("<option selected disabled>Choose..</option>"),"rpvd-create"!=a&&($("#"+a+"-table-form")[0].reset(),$("#"+a+" #totalDebit").val(parseFloat(0).toFixed(2)),$("#"+a+" #totalCredit").val(parseFloat(0).toFixed(2)))),c.forEach(function(e){e.companyCode.forEach(function(t){o==t&&($("#"+a+"-tbody").find("tr:first").find(".gl_Account").append("<option value='"+e._id+"' >"+e.glAccount+" - "+e.glName+"</option>"),console.log("this "+e.glAccount))})})},error:function(e){console.log(e)}})}function addRow(e,o){$.ajax({type:"GET",url:"/get-glUser_list",data:{},success:function(a){var t={};t.selectedCompanyCode=o,t.foundGlAccount_list=a.glAccount_list,t.user=a.user,$("#"+e+"-create-tbody").append(buildGLTable(t))},error:function(e){console.log(e)}})}function buildGLTable(e){var o="";return o+="<tr id='R'>",o+="<td class='row-gl'>",o+="<select name='' class='gl_Account' > ",o+="<option selected disabled>Choose..</option>",e.foundGlAccount_list.forEach(function(a){"admin"==e.user.position?o+="<option value='"+a._id+"' >"+a.glAccount+" - "+a.glName+"</option>":a.companyCode.forEach(function(t){e.selectedCompanyCode.toString()==t.toString()&&(o+="<option value='"+a._id+"' >"+a.glAccount+" - "+a.glName+"</option>")})}),o+="</td>",o+="<td class='row-index'><input type='text' readonly/></td>",o+="<td class='row-dc'> <select class='dc'>",o+="<option value='debit'>Debit</option> <option value='credit'>Credit</option>",o+="</select></td>",o+="<td class='row-amount'><input type='text' class='gl_Amount' /></td>",o+="<td class='row-cost'><input type='text' /></td>",o+="</tr>"}function populateGLTable(e,o){var a=e.transaction.jEntry,t=(a.length,[]),r=0;return a.forEach(function(a){var c="";c+="<tr>",c+="<td class='row-gl'>",c+="<select name='' class='gl_Account' > ",c+="<option selected disabled>Choose..</option>",o.forEach(function(o){"admin"==e.userDetails.position?(c+="<option value='"+o._id+"' >"+o.glAccount+" - "+o.glName+"</option>",a.glID==o._id&&(c+="<option selected  value='"+a.glID+"' >"+o.glAccount+" - "+o.glName+"</option>")):o.companyCode.forEach(function(t){e.transaction.companyCode.toString()==t.toString()&&(a.glID==o._id?c+="<option selected  value='"+a.glID+"' >"+o.glAccount+" - "+o.glName+"</option>":c+="<option value='"+o._id+"' >"+o.glAccount+" - "+o.glName+"</option>")})}),c+="</td>",o.forEach(function(e){e._id==a.glID&&(c+="<td class='row-index'><input type='text' value='"+e.glName+"' /></td>")}),c+="<td class='row-dc'> <select class='dc'>","debit"==a.dcEntry?c+="<option value='debit' selected>Debit</option> <option value='credit'>Credit</option></select></td>":"credit"==a.dcEntry&&(c+="<option value='debit' >Debit</option> <option value='credit' selected>Credit</option></select></td>"),c+="<td class='row-amount'><input type='text' class='gl_Amount' value='"+a.jAmount+"' /></td>",c+="<td class='row-cost'><input type='text' value='"+a.costCenter+"' /></td>",c+="</tr>",t[r]=c,r++}),t}function populateGLTable_approver(e,o){e.length;var a=[],t=0;return e.forEach(function(e){var r="";r+="<tr>",r+="<td class='row-gl'>",r+="<select class='form-select p-1' disabled > ",o.forEach(function(o){e.glID==o._id&&(r+="<option selected  value='"+e.glID+"' >"+o.glAccount+"</option>",r+="</td>",r+="<td class='row-index'><input type='text' value='"+o.glName+"' readonly/></td>")}),r+="<td class='row-dc'> <select class='form-select p-1' disabled>",r+="<option selected  value='"+e.dcEntry+"' >"+e.dcEntry.charAt(0).toUpperCase()+e.dcEntry.slice(1)+" </option>",r+="</select></td>",r+="<td class='row-amount'><input type='text' value='"+e.jAmount+"' readonly/></td>",r+="<td class='row-cost'><input type='text' value='"+e.costCenter+"' readonly/></td>",r+="</tr>",a[t]=r,t++}),a}function onGlAccountChange(e,o){var a=o.child,t=o.theValue;$.ajax({type:"GET",url:"/get-glaccount_list",data:{},success:function(e){var o=e;a.each(function(){var e=$(this).children(".row-index").children("input");o.forEach(function(o){o._id==t&&e.val(o.glName)})})},error:function(e){console.log(e)}})}function tableAmountChange(e,o){var a=parseFloat(0),t=parseFloat(0);$("#"+e+"-create-tbody tr").each(async function(e,o){var r=$(o).find("td").children(".dc").val(),c=parseFloat($(o).find("td").children(".gl_Amount").val());console.log(c),"debit"==r?c&&(a=parseFloat(a+c)):c&&(t=parseFloat(t+c))}),o?($("#"+o+" #totalDebit").val(parseFloat(a).toFixed(2)),$("#"+o+" #totalCredit").val(parseFloat(t).toFixed(2))):($("#"+e+"-create #totalDebit").val(parseFloat(a).toFixed(2)),$("#"+e+"-create #totalCredit").val(parseFloat(t).toFixed(2)))}function checkPeriod(e){var o=e.formID,a=e.account,t=new Date($("#"+o+"-create #postingDate").val()),r=$("#"+o+"-create #companyCode").val(),c=t.getFullYear();$.ajax({type:"GET",url:"/get-controlperiod_list",data:{},success:function(n){n.forEach(function(n){if(a==n.accountType&&r==n.companyCode&&"open"==n.status&&n.controlYear==c){var l=new Date(n.fromPeriod),i=new Date(n.toPeriod),d=l.getTime(),s=i.getTime(),u=t.getTime();u<=s&&u>=d?saveTransaction(e):showLabel(o+"-create-label","Posting for the period is close.","alert-danger")}})},error:function(e){console.log(e)}})}function saveTransaction(e){var o=e.formID,a=e.account,t=e.docID||"",r=o.substring(0,2),c=o.substring(2);if(validateForm(o+"-create").form()){var n=$("#"+o+"-create #documentDate").val(),l=$("#"+o+"-create #postingDate").val(),i=$("#"+o+"-create #reference").val(),d=parseFloat($("#"+o+"-create #amount").val()).toFixed(2),s=$("#"+o+"-create #text").val(),u=$("#"+o+"-create #companyCode").val(),p=$("#"+o+"-create #companyName").val(),m=$("#"+o+"-create #currency").val(),v=$("#"+o+"-create #totalDebit").val(),f=$("#"+o+"-create #totalCredit").val(),y=[];$("#"+o+"-create-tbody").children("tr").each(function(){var e={};e.glID=$(this).children(".row-gl").children("select").val(),e.dcEntry=$(this).children(".row-dc").children("select").val(),e.jAmount=$(this).children(".row-amount").children("input").val(),e.costCenter=$(this).children(".row-cost").children("input").val(),e.jAmount&&(e.glID&&e.dcEntry&&e.costCenter?(console.log(e),y.push(e)):y=[])}),v==f&&f==d?y.length?$.ajax({type:"POST",url:"/"+r+"-"+c,data:{account:a,documentDate:n,postingDate:l,reference:i,amount:d,text:s,companyCode:u,companyName:p,currency:m,debit:v,credit:f,transactionType:a,jlEntry:y,docID:t},success:function(e){e.redirect?($("#"+o+"-create-label").removeClass("d-none").addClass("alert-success").fadeIn().text(e.message),$("#"+o+"-save-btn").addClass("d-none"),$("#"+o+"-back-btn").removeClass("d-none")):showLabel(o+"-create-label",JSON.stringify(e.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):showLabel(o+"-create-label","Incomplete row found!","alert-danger"):(console.log("Not equal"),showLabel(o+"-create-label","Total Amount, Debit and Credit Values are not equal","alert-danger"))}}function fillViewedDocument(e,o){$("#showTransaction").removeClass("d-none"),e.transaction.parker!=e.userDetails._id&&"admin"!=e.userDetails.position||""==e.transaction.poster&&$("#rpvd-update-btn").removeClass("d-none"),"approver"!=e.userDetails.position&&"admin"!=e.userDetails.position||""==e.transaction.poster&&$("#rpvd-approve-btn").removeClass("d-none"),""!=e.transaction.poster&&e.userList.forEach(function(o){o._id==e.transaction.poster&&$("#rpvd-posted").removeClass("d-none").text("Posted by: "+o.fullname)}),e.userList.forEach(function(o){o._id==e.transaction.parker&&$("#rpvd-parked").text("Parked by: "+o.fullname)}),$("#rpvd-create #transactionType").val(e.transaction.transactionType.toLowerCase()),$("#rpvd-create #reference").val(e.transaction.reference),$("#rpvd-create #currency").val(e.transaction.currency),$("#rpvd-create #documentDate").val(e.transaction.documentDate.substring(0,10)),$("#rpvd-create #postingDate").val(e.transaction.postingDate.substring(0,10)),$("#rpvd-create #amount").val(e.transaction.amount),$("#rpvd-create #text").val(e.transaction.text),$("#rpvd-create #documentNumber").val(e.transaction.documentNumber).prop("readonly",!0),$("#rpvd-create #documentID").val(e.transaction._id),$("#rpvd-create #companyCode").val(e.transaction.companyCode);var a={formID:"rpvd-create"};a.selectedCompanyCode=$("#rpvd-create #companyCode").val(),a.account=$("#rpvd-create #transactionType").val(),a.companyName=e.transaction.companyName,onChangeCompanyCode(a),$("#vdTable-form").removeClass("d-none"),$("#dcForm").removeClass("d-none"),$("#dcForm #totalDebit").val(parseFloat(e.transaction.debit).toFixed(2)),$("#dcForm #totalCredit").val(parseFloat(e.transaction.credit).toFixed(2)),$("#rpvd-create-tbody").append(populateGLTable(e,o))}function reportGLBody(e){var o=[],a=0;return e.glAccount.forEach(function(t){a++;var r=[];t.companyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&r.push(e.code)})}),o.push([a,t.glAccount,t.glName,r])}),o}function reportVendorBody(e){var o=[],a=0;return e.vendor.forEach(function(t){a++;var r=[];t.vendorCompanyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&r.push(e.code)})}),o.push([a,t.vendorCode,t.vendorName,r])}),o}function reportCustomerBody(e){var o=[],a=0;return e.customer.forEach(function(t){a++;var r=[];t.customerCompanyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&r.push(e.code)})}),o.push([a,t.customerCode,t.customerName,r])}),o}$("#companyCodeTable").DataTable(),$("#accountTypeTable").DataTable(),$("#accountGroupTable").DataTable(),$("#glSeriesTable").DataTable(),$("#usersTable").DataTable(),$("#privTable").DataTable(),$("#periodTable").DataTable(),$("#reportTable").DataTable(),$(".documentDate").prop("max",(new Date).toISOString().split("T")[0]),$("#usersTable").on("click","tr",function(){clearForm("users-create"),showDiv("onSelectDiv","users-create"),$("#users-create #userID").val($(this).find("td")[0].innerText),$("#users-create #userCompanyCode").val($(this).find("td")[1].innerText.split(",")),$("#users-create #fullname").val($(this).find("td")[2].innerText),$("#users-create #username").attr("readonly","readonly").val($(this).find("td")[3].innerText),$("#users-create #position").val($(this).find("td")[4].innerText)}),$("#users-clearbtn").click(function(e){clearForm("users-create"),$("#users-create #onSelectDiv").addClass("d-none"),$("#users-create #username").removeAttr("readonly")}),$("#users-addbtn").click(function(e){if(validateForm("users-create").form()){var o=$("#fullname").val(),a=$("#position").val(),t=$("#username").val(),r=$("#password").val(),c=$("#userCompanyCode").val();r===$("#retypepassword").val()?$.ajax({type:"POST",url:"/us-create",data:{username:t,fullname:o,position:a,password:r,companyCode:c},success:function(e){e.redirect?(showLabel("users-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("users-label","Unauthorized!"==e?"Unauthorized user!":JSON.stringify(e.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):showLabel("users-label","Passwords does not match!","alert-danger")}}),$("#users-updatebtn").click(function(e){if(validateForm("users-create").form()){var o=$("#userID").val(),a=$("#fullname").val(),t=$("#position").val(),r=$("#userCompanyCode").val(),c=$("#username").val(),n=$("#password").val(),l=$("#retypepassword").val();""==o?showLabel("users-label","Error! Select a user from table.","alert-danger"):n==l?$.ajax({type:"PATCH",url:"/us-create",data:{userId:o,fullname:a,position:t,username:c,password:n,companyCode:r},success:function(e){e.redirect?(showLabel("users-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("users-label","Unauthorized!"==e?"Unauthorized user!":JSON.stringify(e.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):showLabel("users-label","Passwords does not match!","alert-danger")}}),$("#privTable").on("click","tr",function(){clearForm("privileges-form"),$("#privileges-form #positionID").val($(this).find("td")[0].innerText),$("#privileges-form #privPosition").val($(this).find("td")[1].innerText),"Yes"==$(this).find("td")[2].innerText?$("#privileges-form #parkPriv").prop("checked",!0):$("#privileges-form #parkPriv").prop("checked",!1),"Yes"==$(this).find("td")[3].innerText?$("#privileges-form #postPriv").prop("checked",!0):$("#privileges-form #postPriv").prop("checked",!1)}),$("#priv-clearbtn").click(function(e){clearForm("privileges-form")}),$("#priv-addbtn").click(function(e){if(validateForm("privileges-form").form()){var o=$("#privPosition").val().toLowerCase(),a=0,t=0;$("#postPriv").prop("checked")&&(a=1),$("#parkPriv").prop("checked")&&(t=1),$.ajax({type:"POST",url:"/us-privilege",data:{position:o,post:a,park:t},success:function(e){e.redirect?(showLabel("privilege-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("privilege-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#priv-updatebtn").click(function(e){if(validateForm("privileges-form").form()){var o=$("#privPosition").val().toLowerCase(),a=$("#positionID").val(),t=0,r=0;""==a?showLabel("privilege-label","Error! Select a position from table.","alert-danger"):($("#postPriv").prop("checked")&&(t=1),$("#parkPriv").prop("checked")&&(r=1),$.ajax({type:"PATCH",url:"/us-privilege",data:{positionID:a,position:o,post:t,park:r},success:function(e){e.redirect?(showLabel("privilege-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("privilege-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}}))}}),$("#companyCodeTable").on("click","tr",function(){showDiv("onSelectDiv","ccode"),$("#ccode #selectedCompanyCode").val($(this).find("td")[1].innerText),$("#ccode #company_codeID").val($(this).find("td")[0].innerText),$("#ccode #company_code").val($(this).find("td")[1].innerText),$("#ccode #company_name").val($(this).find("td")[2].innerText),$("#ccode #company_country").val($(this).find("td")[3].innerText),$("#ccode #company_currency").val($(this).find("td")[4].innerText)}),$("#ccode-clearbtn").click(function(e){clearForm("ccode"),hideDiv("#ccode #onSelectDiv")}),$("#ccode-addbtn").click(function(e){if(validateForm("ccode").form()){var o=$("#company_codeID").val(),a=$("#company_code").val(),t=$("#company_name").val(),r=$("#company_country").val(),c=$("#company_currency").val();$.ajax({type:"POST",url:"/gn-companycode",data:{company_codeID:o,company_code:a,company_name:t,company_country:r,company_currency:c},success:function(e){e.redirect?(showLabel("ccode-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("ccode-label",e.errorMessage,"alert-danger"):showLabel("ccode-label","Company code exists!","alert-danger")},error:function(e){console.log(e)}})}}),$("#ccode-updatebtn").click(function(e){if(validateForm("ccode").form()){var o=$("#company_codeID").val(),a=$("#company_code").val(),t=$("#company_name").val(),r=$("#company_country").val(),c=$("#company_currency").val();""==o?showLabel("ccode-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gn-companycode",data:{company_codeID:o,company_code:a,company_name:t,company_country:r,company_currency:c},success:function(e){e.redirect?(showLabel("ccode-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("ccode-label","error "+e.errorMessage,"alert-danger"):showLabel("ccode-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ccode-deletebtn").click(function(e){if(validateForm("ccode").form()){var o=$("#company_codeID").val();""==o?showLabel("ccode-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gn-companycode",data:{company_codeID:o},success:function(e){e.redirect?(showLabel("ccode-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error&&showLabel("ccode-label","error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#periodTable").on("click","tr",function(){$("#periodID").val($(this).find("td")[0].innerText),$("#period_accountType").val($(this).find("td")[1].innerText),$("#period_companycode").val($(this).find("td")[3].innerText),$("#period_fromAccount").val($(this).find("td")[4].innerText),$("#period_toAccount").val($(this).find("td")[5].innerText),$("#period_fromPeriod").val($(this).find("td")[6].innerText),$("#period_toPeriod").val($(this).find("td")[7].innerText),$("#period_year").val($(this).find("td")[8].innerText),$("#period_status").val($(this).find("td")[9].innerText)}),$("#period-clearbtn").click(function(e){clearForm("controlPeriod")}),$("#period-addbtn").click(function(e){if(validateForm("controlPeriod").form()){var o=$("#period_accountType").val(),a=$("#period_companycode").val(),t=$("#period_fromAccount").val(),r=$("#period_toAccount").val(),c=$("#period_fromPeriod").val(),n=$("#period_toPeriod").val(),l=$("#period_year").val(),i=$("#period_status").val();$.ajax({type:"POST",url:"/gn-control",data:{accountType:o,companyCode:a,fromAccount:t,toAccount:r,fromPeriod:c,toPeriod:n,controlYear:l,status:i},success:function(e){e.redirect?(showLabel("period-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("period-label",e.errorMessage,"alert-danger"):showLabel("period-label","Control exists!","alert-danger")},error:function(e){console.log(e)}})}}),$("#period-updatebtn").click(function(e){if(validateForm("controlPeriod").form()){var o=$("#periodID").val(),a=$("#period_accountType").val(),t=$("#period_companycode").val(),r=$("#period_fromAccount").val(),c=$("#period_toAccount").val(),n=$("#period_fromPeriod").val(),l=$("#period_toPeriod").val(),i=$("#period_year").val(),d=$("#period_status").val();""==o?showLabel("period-label","Error! Select period from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gn-control",data:{periodID:o,accountType:a,companyCode:t,fromAccount:r,toAccount:c,fromPeriod:n,toPeriod:l,controlYear:i,status:d},success:function(e){e.redirect?(showLabel("period-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("period-label","error "+e.errorMessage,"alert-danger"):showLabel("period-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#period-deletebtn").click(function(e){if(validateForm("controlPeriod").form()){var o=$("#periodID").val();""==o?showLabel("period-label","Error! Select period from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gn-control",data:{periodID:o},success:function(e){e.redirect?(showLabel("period-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error&&showLabel("period-label","error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accountTypeTable").on("click","tr",function(){showDiv("onSelectDiv","acctype"),$("#acctype #selectedAccountType").val($(this).find("td")[1].innerText),$("#acctype #accountTypeID").val($(this).find("td")[0].innerText),$("#acctype #account_type").val($(this).find("td")[1].innerText),$("#acctype #accountTypeRangeFrom").val($(this).find("td")[2].innerText),$("#acctype #accountTypeRangeTo").val($(this).find("td")[3].innerText)}),$("#acctype-clearbtn").click(function(e){clearForm("acctype"),hideDiv("#acctype #onSelectDiv")}),$("#acctype-addbtn").click(function(e){if(validateForm("acctype").form()){var o=$("#account_type").val(),a=$("#accountTypeRangeFrom").val(),t=$("#accountTypeRangeTo").val();$.ajax({type:"POST",url:"/gl-accounttype",data:{account_type:o,accountTypeRangeFrom:a,accountTypeRangeTo:t},success:function(e){e.redirect?(showLabel("acctype-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("acctype-label",e.errorMessage,"alert-danger"):showLabel("acctype-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#acctype-updatebtn").click(function(e){if(validateForm("acctype").form()){var o=$("#account_type").val(),a=$("#accountTypeID").val(),t=$("#accountTypeRangeFrom").val(),r=$("#accountTypeRangeTo").val();""==a?showLabel("acctype-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-accounttype",data:{account_typeID:a,account_type:o,accountTypeRangeFrom:t,accountTypeRangeTo:r},success:function(e){e.redirect?(showLabel("acctype-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("acctype-label","error "+e.errorMessage,"alert-danger"):showLabel("acctype-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#acctype-deletebtn").click(function(e){if(validateForm("acctype").form()){var o=$("#accountTypeID").val();""==o?showLabel("acctype-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-accounttype",data:{account_typeID:o},success:function(e){e.redirect?(showLabel("acctype-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error&&showLabel("acctype-label","error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accountGroupTable").on("click","tr",function(){showDiv("onSelectDiv","accgroup"),$("#accgroup #selectedAccountGroup").val($(this).find("td")[1].innerText),$("#accgroup #accountGroupID").val($(this).find("td")[0].innerText),$("#accgroup #accountGroupName").val($(this).find("td")[1].innerText),$("#accgroup #accGroup_typeID").val($(this).find("td")[2].innerText)}),$("#accgroup-clearbtn").click(function(e){clearForm("accgroup"),hideDiv("#accgroup #onSelectDiv")}),$("#accgroup-addbtn").click(function(e){if(validateForm("accgroup").form()){var o=$("#accGroup_typeID").val(),a=$("#accountGroupName").val();$.ajax({type:"POST",url:"/gl-accountgroup",data:{accountGrouptypeID:o,accountGroupName:a},success:function(e){e.redirect?(showLabel("accgroup-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("accgroup-label",e.errorMessage,"alert-danger"):showLabel("accgroup-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accgroup-updatebtn").click(function(e){if(validateForm("accgroup").form()){var o=$("#accountGroupID").val(),a=$("#accGroup_typeID").val(),t=$("#accountGroupName").val();""==o?showLabel("accgroup-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-accountgroup",data:{accountGroupID:o,accountGrouptypeID:a,accountGroupName:t},success:function(e){e.redirect?(showLabel("accgroup-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("accgroup-label","error "+e.errorMessage,"alert-danger"):showLabel("accgroup-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accgroup-deletebtn").click(function(e){if(validateForm("accgroup").form()){var o=$("#accountGroupID").val(),a=$("#accGroup_typeID").val();""==o?showLabel("accgroup-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-accountgroup",data:{accountGroupID:o,accountGrouptypeID:a},success:function(e){e.redirect?(showLabel("accgroup-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error&&showLabel("accgroup-label","error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeriesTable").on("click","tr",function(){showDiv("onSelectDiv","glSeries"),$("#glSeries #selectedGlSeries").val($(this).find("td")[1].innerText),$("#glSeries #glSeries_id").val($(this).find("td")[0].innerText),$("#glSeries #accountGL").val($(this).find("td")[1].innerText),$("#glSeries #seriesGL").val($(this).find("td")[2].innerText)}),$("#glSeries-clearbtn").click(function(e){clearForm("glSeries"),hideDiv("#glSeries #onSelectDiv")}),$("#glSeries-addbtn").click(function(e){if(validateForm("glSeries").form()){var o=$("#accountGL").val(),a=$("#seriesGL").val();$.ajax({type:"POST",url:"/gl-series",data:{accountGl:o,seriesGl:a},success:function(e){e.redirect?(showLabel("glSeries-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("glSeries-label",e.errorMessage,"alert-danger"):showLabel("glSeries-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeries-updatebtn").click(function(e){if(validateForm("glSeries").form()){var o=$("#accountGL").val(),a=$("#seriesGL").val();""==$("#glSeries_id").val()?showLabel("glSeries-label","Error! Select account from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-series",data:{accountGl:o,seriesGl:a},success:function(e){e.redirect?(showLabel("glSeries-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error?showLabel("glSeries-label","error "+e.errorMessage,"alert-danger"):showLabel("glSeries-label",e.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeries-deletebtn").click(function(e){if(validateForm("glSeries").form()){var o=$("#glSeries_id").val();""==o?showLabel("glSeries-label","Error! Select account from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-series",data:{glSeries_id:o},success:function(e){e.redirect?(showLabel("glSeries-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):e.error&&showLabel("glSeries-label","error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-create #acc_type").change(function(e){var o=$("#gl-create #acc_type").val();o&&$.ajax({type:"GET",url:"/get-accountType_list",data:{},success:function(e){var a=e;$("#gl-create #acc_group").empty(),$("#gl-create #acc_group").append("<option selected disabled> Choose... </option>"),a.forEach(function(e){e._id==o&&e.accountGroup.forEach(function(e){$("#gl-create #acc_group").append('<option value="'+e._id+'">'+e.accountGroup+"</option>")})})},error:function(e){console.log(e)}})}),$("#gl-create-btn").click(function(e){if(validateForm("gl-create").form()){var o=$("#gl-create #gl_account").val(),a=$("#gl-create #c_code").val(),t=$("#gl-create #acc_type").val(),r=$("#gl-create #acc_group").val(),c=$("#gl-create #gl_name").val(),n=$("#gl-create #acc_currency").val(),l=$("#gl-create #tax_category").val(),i=$("#gl-create #desc_short").val(),d=$("#gl-create #desc_long").val();$.ajax({type:"POST",url:"/md-gl",data:{glAccount:o,companyCode:a,accountType:t,accountGroup:r,glName:c,accountCurrency:n,taxCategory:l,descShort:i,descLong:d},success:function(e){e.redirect?(showLabel("gl-create-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("gl-create-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-modify #gl_account").change(function(e){var o=$("#gl-modify #gl_account").val();o&&$.ajax({type:"GET",url:"/get-accounts_list",data:{},success:function(e){var a=e.glAccount_list,t=e.accountType_list;$("#gl-modify #acc_group").empty().append("<option selected disabled> Choose... </option>"),a.forEach(function(e){e._id==o&&($("#gl-modify #c_code").val(e.companyCode),$("#gl-modify #acc_type").val(e.accountType),t.forEach(function(o){e.accountType==o._id&&o.accountGroup.forEach(function(o){e.accountGroup==o._id?$("#gl-modify #acc_group").append('<option value="'+o._id+'" selected>'+o.accountGroup+"</option>"):$("#gl-modify #acc_group").append('<option value="'+o._id+'">'+o.accountGroup+"</option>")})}),$("#gl-modify #gl_name").val(e.glName),$("#gl-modify #acc_currency").val(e.accountCurrency),$("#gl-modify #desc_short").val(e.descShort),$("#gl-modify #desc_long").val(e.descLong))})},error:function(e){console.log(e)}})}),$("#gl-modify #acc_type").change(function(e){var o=$("#gl-modify #acc_type").val();o&&$.ajax({type:"GET",url:"/get-accountType_list",data:{},success:function(e){var a=e;$("#gl-modify #acc_group").empty(),$("#gl-modify #acc_group").append("<option selected disabled> Choose... </option>"),a.forEach(function(e){e._id==o&&e.accountGroup.forEach(function(e){$("#gl-modify #acc_group").append('<option value="'+e._id+'">'+e.accountGroup+"</option>")})})},error:function(e){console.log(e)}})}),$("#gl-modify #update-btn").click(function(e){if(validateForm("gl-modify").form()){var o=$("#gl-modify #gl_account").val(),a=$("#gl-modify #c_code").val(),t=$("#gl-modify #acc_type").val(),r=$("#gl-modify #acc_group").val(),c=$("#gl-modify #gl_name").val(),n=$("#gl-modify #acc_currency").val(),l=$("#gl-modify #tax_category").val(),i=$("#gl-modify #desc_short").val(),d=$("#gl-modify #desc_long").val();$.ajax({type:"PATCH",url:"/md-gl",data:{glAccount:o,companyCode:a,accountType:t,accountGroup:r,glName:c,accountCurrency:n,taxCategory:l,descShort:i,descLong:d},success:function(e){e.redirect?(showLabel("gl-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("gl-modify-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-modify #delete-btn").click(function(e){var o=$("#gl-modify #gl_account").val();null===o?showLabel("gl-modify-label","Error! Please select GL Account you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-gl",data:{glAccount:o},success:function(e){e.redirect?(showLabel("gl-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("gl-modify-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#vd-create-btn").click(function(e){if(validateForm("vd-create").form()){var o=$("#vd-create #vd_code").val(),a=$("#vd-create #vd_name").val(),t=$("#vd-create #vd_companycode").val(),r=$("#vd-create #vd_currency").val(),c=$("#vd-create #vd_taxcategory").val(),n=$("#vd-create #vd_term").val(),l=$("#vd-create #vd_tax").val(),i=$("#vd-create #vd_recon").val(),d=$("#vd-create #vd_street").val(),s=$("#vd-create #vd_city").val(),u=$("#vd-create #vd_country").val(),p=$("#vd-create #vd_postalcode").val(),m=$("#vd-create #vd_telephone").val(),v=$("#vd-create #vd_email").val(),f=$("#vd-create #vd_website").val();$.ajax({type:"POST",url:"/md-vendor",data:{vendorCode:o,vendorName:a,vendorCompanyCode:t,vendorCurrency:r,vendorTaxCategory:c,vendorPaymentTerm:n,vendorTax:l,vendorRecon:i,vendorStreet:d,vendorCity:s,vendorCountry:u,vendorPostalCode:p,vendorTelephone:m,vendorEmail:v,vendorWebsite:f},success:function(e){e.redirect?(showLabel("vd-create-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("vd-create-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#vd-modify #vd_code").change(function(e){var o=$("#vd-modify #vd_code").val();o&&$.ajax({type:"GET",url:"/get-vendor_list",data:{},success:function(e){e.forEach(function(e){e._id==o&&($("#vd-modify #vd_name").val(e.vendorName),$("#vd-modify #vd_companycode").val(e.vendorCompanyCode),$("#vd-modify #vd_currency").val(e.vendorCurrency),$("#vd-modify #vd_taxcategory").val(e.vendorTaxCategory),$("#vd-modify #vd_term").val(e.vendorPaymentTerm),$("#vd-modify #vd_tax").val(e.vendorTax),$("#vd-modify #vd_recon").val(e.vendorRecon),$("#vd-modify #vd_street").val(e.vendorStreet),$("#vd-modify #vd_city").val(e.vendorCity),$("#vd-modify #vd_country").val(e.vendorCountry),$("#vd-modify #vd_postalcode").val(e.vendorPostalCode),$("#vd-modify #vd_telephone").val(e.vendorTelephone),$("#vd-modify #vd_email").val(e.vendorEmail),$("#vd-modify #vd_website").val(e.vendorWebsite))})},error:function(e){console.log(e)}})}),$("#vd-modify #update-btn").click(function(e){if(validateForm("vd-modify").form()){var o=$("#vd-modify #vd_code").val(),a=$("#vd-modify #vd_name").val(),t=$("#vd-modify #vd_companycode").val(),r=$("#vd-modify #vd_currency").val(),c=$("#vd-modify #vd_taxcategory").val(),n=$("#vd-modify #vd_term").val(),l=$("#vd-modify #vd_tax").val(),i=$("#vd-modify #vd_recon").val(),d=$("#vd-modify #vd_street").val(),s=$("#vd-modify #vd_city").val(),u=$("#vd-modify #vd_country").val(),p=$("#vd-modify #vd_postalcode").val(),m=$("#vd-modify #vd_telephone").val(),v=$("#vd-modify #vd_email").val(),f=$("#vd-modify #vd_website").val();$.ajax({type:"PATCH",url:"/md-vendor",data:{vendorCode:o,vendorName:a,vendorCompanyCode:t,vendorCurrency:r,vendorTaxCategory:c,vendorPaymentTerm:n,vendorTax:l,vendorRecon:i,vendorStreet:d,vendorCity:s,vendorCountry:u,vendorPostalCode:p,vendorTelephone:m,vendorEmail:v,vendorWebsite:f},success:function(e){e.redirect?(showLabel("vd-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("vd-modify-label","Unauthorized!"==e?"Unauthorized user!":"error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#vd-modify #delete-btn").click(function(e){var o=$("#vd-modify #vd_code").val();""==o?showLabel("vd-modify-label","Error! Please select Vendor Code you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-vendor",data:{vendorCode:o},success:function(e){e.redirect?(showLabel("vd-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("vd-modify-label","Unauthorized!"==e?"Unauthorized user!":"error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#ct-create-btn").click(function(e){if(validateForm("ct-create").form()){var o=$("#ct-create #ct_code").val(),a=$("#ct-create #ct_name").val(),t=$("#ct-create #ct_companycode").val(),r=$("#ct-create #ct_currency").val(),c=$("#ct-create #ct_taxcategory").val(),n=$("#ct-create #ct_term").val(),l=$("#ct-create #ct_tax").val(),i=$("#ct-create #ct_recon").val(),d=$("#ct-create #ct_street").val(),s=$("#ct-create #ct_city").val(),u=$("#ct-create #ct_country").val(),p=$("#ct-create #ct_postalcode").val(),m=$("#ct-create #ct_telephone").val(),v=$("#ct-create #ct_email").val(),f=$("#ct-create #ct_website").val();$.ajax({type:"POST",url:"/md-customer",data:{customerCode:o,customerName:a,customerCompanyCode:t,customerCurrency:r,customerTaxCategory:c,customerPaymentTerm:n,customerTax:l,customerRecon:i,customerStreet:d,customerCity:s,customerCountry:u,customerPostalCode:p,customerTelephone:m,customerEmail:v,customerWebsite:f},success:function(e){e.redirect?(showLabel("ct-create-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("ct-create-label","Unauthorized!"==e?"Unauthorized user!":e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ct-modify #ct_code").change(function(e){var o=$("#ct-modify #ct_code").val();o&&$.ajax({type:"GET",url:"/get-customer_list",data:{},success:function(e){e.forEach(function(e){e._id==o&&($("#ct-modify #ct_name").val(e.customerName),$("#ct-modify #ct_companycode").val(e.customerCompanyCode),$("#ct-modify #ct_currency").val(e.customerCurrency),$("#ct-modify #ct_taxcategory").val(e.customerTaxCategory),$("#ct-modify #ct_term").val(e.customerPaymentTerm),$("#ct-modify #ct_tax").val(e.customerTax),$("#ct-modify #ct_recon").val(e.customerRecon),$("#ct-modify #ct_street").val(e.customerStreet),$("#ct-modify #ct_city").val(e.customerCity),$("#ct-modify #ct_country").val(e.customerCountry),$("#ct-modify #ct_postalcode").val(e.customerPostalCode),$("#ct-modify #ct_telephone").val(e.customerTelephone),$("#ct-modify #ct_email").val(e.customerEmail),$("#ct-modify #ct_website").val(e.customerWebsite))})},error:function(e){console.log(e)}})}),$("#ct-modify #update-btn").click(function(e){if(validateForm("ct-modify").form()){var o=$("#ct-modify #ct_code").val(),a=$("#ct-modify #ct_name").val(),t=$("#ct-modify #ct_companycode").val(),r=$("#ct-modify #ct_currency").val(),c=$("#ct-modify #ct_taxcategory").val(),n=$("#ct-modify #ct_term").val(),l=$("#ct-modify #ct_tax").val(),i=$("#ct-modify #ct_recon").val(),d=$("#ct-modify #ct_street").val(),s=$("#ct-modify #ct_city").val(),u=$("#ct-modify #ct_country").val(),p=$("#ct-modify #ct_postalcode").val(),m=$("#ct-modify #ct_telephone").val(),v=$("#ct-modify #ct_email").val(),f=$("#ct-modify #ct_website").val();$.ajax({type:"PATCH",url:"/md-customer",data:{customerCode:o,customerName:a,customerCompanyCode:t,customerCurrency:r,customerTaxCategory:c,customerPaymentTerm:n,customerTax:l,customerRecon:i,customerStreet:d,customerCity:s,customerCountry:u,customerPostalCode:p,customerTelephone:m,customerEmail:v,customerWebsite:f},success:function(e){e.redirect?(showLabel("ct-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("ct-modify-label","Unauthorized!"==e?"Unauthorized user!":"error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ct-modify #delete-btn").click(function(e){var o=$("#ct-modify #ct_code").val();""==o?showLabel("ct-modify-label","Error! Please select Customer Code you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-customer",data:{customerCode:o},success:function(e){e.redirect?(showLabel("ct-modify-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("ct-modify-label","Unauthorized!"==e?"Unauthorized user!":"error "+e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#acgl-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#acgl-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#apvi-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#apvi-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#arci-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#arci-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#acgl-create #companyCode").change(function(e){var o={formID:"acgl-create"};o.selectedCompanyCode=$("#acgl-create #companyCode").val(),o.account="gl",onChangeCompanyCode(o)}),$("#arci-create #companyCode").change(function(e){var o={formID:"arci-create"};o.selectedCompanyCode=$("#arci-create #companyCode").val(),o.account="customer",onChangeCompanyCode(o)}),$("#apvi-create #companyCode").change(function(e){var o={formID:"apvi-create"};o.selectedCompanyCode=$("#apvi-create #companyCode").val(),o.account="vendor",onChangeCompanyCode(o)}),$("#rpvd-create #companyCode").change(function(e){var o={formID:"rpvd-create"};o.selectedCompanyCode=$("#rpvd-create #companyCode").val(),o.account=$("#rpvd-create #transactionType").val(),onChangeCompanyCode(o)}),$("#acgl-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),onGlAccountChange("acgl",e)}),$("#arci-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),onGlAccountChange("arci",e)}),$("#apvi-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),onGlAccountChange("apvi",e)}),$("#rpvd-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),onGlAccountChange("rpvd-create",e)}),$("#acgl-create-tbody").on("keyup",".gl_Amount",function(){tableAmountChange("acgl")}),$("#arci-create-tbody").on("keyup",".gl_Amount",function(){tableAmountChange("arci")}),$("#apvi-create-tbody").on("keyup",".gl_Amount",function(){tableAmountChange("apvi")}),$("#rpvd-create-tbody").on("keyup",".gl_Amount",function(){tableAmountChange("rpvd","dcForm")}),$("#acgl-addItem").on("click",function(){addRow("acgl",$("#acgl-create #companyCode").val())}),$("#arci-addItem").on("click",function(){addRow("arci",$("#arci-create #companyCode").val())}),$("#apvi-addItem").on("click",function(){addRow("apvi",$("#apvi-create #companyCode").val())}),$("#rpvd-addItem").on("click",function(){addRow("rpvd",$("#rpvd-create #companyCode").val())}),$("#acgl-save-btn").click(function(e){var o={formID:"acgl",account:"gl"};validateForm(o.formID+"-create").form()&&checkPeriod(o)}),$("#arci-save-btn").click(function(e){var o={formID:"arci",account:"customer"};validateForm(o.formID+"-create").form()&&checkPeriod(o)}),$("#apvi-save-btn").click(function(e){var o={formID:"apvi",account:"vendor"};validateForm(o.formID+"-create").form()&&checkPeriod(o)}),$("#acgl-back-btn").click(function(e){location.reload()}),$("#arci-back-btn").click(function(e){location.reload()}),$("#apvi-back-btn").click(function(e){location.reload()}),$("#rp-searchDocKeys #search-btn").click(function(e){if(validateForm("rp-searchDocKeys").form()){var o=$("#rp-searchDocKeys #searchdocumentNumber").val(),a=$("#rp-searchDocKeys #searchcompanyCode").val(),t=$("#rp-searchDocKeys #searchyear").val(),r=0,c={};$.ajax({type:"GET",url:"/get-search_list",data:{},success:function(e){console.log(e);var n=e.glTransaction_List,l=e.glAccount_list;c.userList=e.user_List,c.userDetails=e.user,n.forEach(function(e){o==e.documentNumber&&t==new Date(e.documentDate).getFullYear()&&a==e.companyCode&&(r=1,c.transaction=e)}),r?($("#searchForm").addClass("d-none"),fillViewedDocument(c,l)):showLabel("rp-searchDocKeys-label","No document found.","alert-danger")},error:function(e){console.log(e)}})}}),$("#rp-searchDocRef #refsearch-btn").click(function(e){if(validateForm("rp-searchDocRef").form()){var o=$("#rp-searchDocRef #documentReference").val(),a=0,t={};$.ajax({type:"GET",url:"/get-search_list",data:{},success:function(e){var r=e.glTransaction_List,c=e.glAccount_list;t.userList=e.user_List,t.userDetails=e.user,r.forEach(function(e){o==e.reference&&(a++,t.transaction=e)}),1==a?($("#searchForm").addClass("d-none"),fillViewedDocument(t,c)):showLabel("rp-searchDocRef-label",a>1?"Duplicate reference found.Please try using other search method.":"No document found.","alert-danger")},error:function(e){console.log(e)}})}}),$("#rpvd-update-btn").click(function(e){var o={formID:"rpvd"};o.account=$("#rpvd-create #transactionType").val(),o.docID=$("#rpvd-create #documentID").val(),validateForm(o.formID+"-create").form()&&checkPeriod(o)}),$("#rpvd-approve-btn").click(function(e){var o=$("#rpvd-create #documentID").val();$.ajax({type:"PATCH",url:"/rp-vd",data:{documentID:o},success:function(e){e.redirect?(showLabel("rpvd-create-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("rpvd-create-label",e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#genDocSeq-btn").click(function(e){if(validateForm("genDocSeq").form()){var o=$("#genDocSeq #genYear").val();$.ajax({type:"POST",url:"/gl-sequence",data:{year:o},success:function(e){e.redirect?(showLabel("docSeq-label",e.message,"alert-success"),window.setTimeout(function(){window.location=e.redirectURL},1e3)):showLabel("docSeq-label",e.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#rpvd-back-btn").click(function(e){location.reload()}),$("#rpmd-select").change(function(e){var o=e.target.value,a={},t=[{title:"#"},{title:"GL Account"},{title:"GL Name"},{title:"Company Code"}],r=[{title:"#"},{title:"Vendor Code"},{title:"Vendor Name"},{title:"Company Code"}],c=[{title:"#"},{title:"Customer Code"},{title:"Customer Name"},{title:"Company Code"}];$.ajax({type:"GET",url:"/get-masterdata_list",success:function(e){"GL"==o?($.fn.DataTable.isDataTable("#vendorReportTable")&&$("#vendorReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#customerReportTable")&&$("#customerReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#vendorReportTable").addClass("d-none"),$("#customerReportTable").addClass("d-none"),$("#glReportTable").removeClass("d-none"),a.glAccount=e.glAccount_list,a.companyCode=e.companyCode_list,$("#glReportTable").DataTable({columns:t,data:reportGLBody(a),retrieve:!0})):"Vendor"==o?($.fn.DataTable.isDataTable("#glReportTable")&&$("#glReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#customerReportTable")&&$("#customerReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#glReportTable").addClass("d-none"),$("#customerReportTable").addClass("d-none"),$("#vendorReportTable").removeClass("d-none"),a.vendor=e.vendor_List,a.companyCode=e.companyCode_list,$("#vendorReportTable").DataTable({columns:r,data:reportVendorBody(a),retrieve:!0})):"Customer"==o&&($.fn.DataTable.isDataTable("#glReportTable")&&$("#glReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#vendorReportTable")&&$("#vendorReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#glReportTable").addClass("d-none"),$("#vendorReportTable").addClass("d-none"),$("#customerReportTable").removeClass("d-none"),a.customer=e.customer_List,a.companyCode=e.companyCode_list,$("#customerReportTable").DataTable({columns:c,data:reportCustomerBody(a),retrieve:!0}))},error:function(e){console.log(e)}})}),$(window).on("load",function(){$(".se-pre-con").hide()});