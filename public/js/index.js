$(document).ready(function(){function e(e,o,t){var a="#"+e;$(a).addClass(t).removeClass("d-none"),$(a).fadeIn(),$(a).text(o),window.setTimeout(function(){$(a).fadeOut("slow","swing"),$(a).addClass("d-none").removeClass(t).text("")},2e3)}function o(e,o){$("#"+o+" #"+e).removeClass("d-none")}function t(e){$(e).addClass("d-none")}function a(e){return $("#"+e).validate()}function c(e){$("#"+e)[0].reset()}function r(e){var o=e.selectedCompanyCode,t=e.formID,a=e.account;o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(c){var r=c.glAccount_list;if("customer"==a){var n=c.customer_List;$("#"+t+" #companyName").empty(),$("#"+t+" #companyName").append("<option selected disabled> Choose... </option>"),n.forEach(function(e){e.customerCompanyCode==o&&$("#"+t+" #companyName").append('<option value="'+e._id+'">'+e.customerCode+" -  "+e.customerName+"</option>")})}else if("vendor"==a){n=c.vendor_List;$("#"+t+" #companyName").empty(),$("#"+t+" #companyName").append("<option selected disabled> Choose... </option>"),n.forEach(function(e){e.vendorCompanyCode==o&&$("#"+t+" #companyName").append('<option value="'+e._id+'">'+e.vendorCode+" -  "+e.vendorName+"</option>")})}else if("gl"==a){var l=c.customer_List,i=c.vendor_List;$("#"+t+" #companyName").empty(),$("#"+t+" #companyName").append("<option selected disabled> Choose... </option>"),l.forEach(function(e){e.customerCompanyCode==o&&$("#"+t+" #companyName").append('<option value="'+e._id+'">'+e.customerCode+" -  "+e.customerName+"</option>")}),i.forEach(function(e){e.vendorCompanyCode==o&&$("#"+t+" #companyName").append('<option value="'+e._id+'">'+e.vendorCode+" -  "+e.vendorName+"</option>")})}e.companyName?$("#rpvd-create #companyName").val(e.companyName):($("#"+t+"-tbody").find("tr:first").find("input,select").val(""),$("#"+t+"-tbody").find("tr:gt(0)").remove(),$("#"+t+"-tbody").find("tr:first").find(".gl_Account").empty().append("<option selected disabled>Choose..</option>"),"rpvd-create"!=t&&($("#"+t+"-table-form")[0].reset(),$("#"+t+" #totalDebit").val(parseFloat(0).toFixed(2)),$("#"+t+" #totalCredit").val(parseFloat(0).toFixed(2)))),r.forEach(function(e){e.companyCode.forEach(function(a){o==a&&($("#"+t+"-tbody").find("tr:first").find(".gl_Account").append("<option value='"+e._id+"' >"+e.glAccount+" - "+e.glName+"</option>"),console.log("this "+e.glAccount))})})},error:function(e){console.log(e)}})}function n(e,o){$.ajax({type:"GET",url:"/main-list",data:{},success:function(t){var a={};a.selectedCompanyCode=o,a.foundGlAccount_list=t.glAccount_list,a.user=t.user,$("#"+e+"-create-tbody").append(function(e){var o="";return o+="<tr id='R'>",o+="<td class='row-gl'>",o+="<select name='' class='gl_Account' > ",o+="<option selected disabled>Choose..</option>",e.foundGlAccount_list.forEach(function(t){"admin"==e.user.position?o+="<option value='"+t._id+"' >"+t.glAccount+" - "+t.glName+"</option>":t.companyCode.forEach(function(a){e.selectedCompanyCode.toString()==a.toString()&&(o+="<option value='"+t._id+"' >"+t.glAccount+" - "+t.glName+"</option>")})}),o+="</td>",o+="<td class='row-index'><input type='text' readonly/></td>",o+="<td class='row-dc'> <select class='dc'>",o+="<option value='debit'>Debit</option> <option value='credit'>Credit</option>",o+="</select></td>",o+="<td class='row-amount'><input type='text' class='gl_Amount' /></td>",o+="<td class='row-cost'><input type='text' /></td>",o+="</tr>"}(a))},error:function(e){console.log(e)}})}function l(e,o){var t=o.child,a=o.theValue;$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){var o=e.glAccount_list;t.each(function(){var e=$(this).children(".row-index").children("input");o.forEach(function(o){o._id==a&&e.val(o.glName)})})},error:function(e){console.log(e)}})}function i(e,o){var t=parseFloat(0),a=parseFloat(0);$("#"+e+"-create-tbody tr").each(async function(e,o){var c=$(o).find("td").children(".dc").val(),r=parseFloat($(o).find("td").children(".gl_Amount").val());console.log(r),"debit"==c?r&&(t=parseFloat(t+r)):r&&(a=parseFloat(a+r))}),o?($("#"+o+" #totalDebit").val(parseFloat(t).toFixed(2)),$("#"+o+" #totalCredit").val(parseFloat(a).toFixed(2))):($("#"+e+"-create #totalDebit").val(parseFloat(t).toFixed(2)),$("#"+e+"-create #totalCredit").val(parseFloat(a).toFixed(2)))}function d(o){var t=o.formID,c=o.account,r=new Date($("#"+t+"-create #postingDate").val()),n=$("#"+t+"-create #companyCode").val(),l=r.getFullYear();$.ajax({type:"GET",url:"/main-list",data:{},success:function(i){i.controlPeriod_List.forEach(function(i){if(c==i.accountType&&n==i.companyCode&&"open"==i.status&&i.controlYear==l){var d=new Date(i.fromPeriod),s=new Date(i.toPeriod),u=d.getTime(),p=s.getTime(),m=r.getTime();m<=p&&m>=u?function(o){var t=o.formID,c=o.account,r=o.docID||"",n=t.substring(0,2),l=t.substring(2);if(a(t+"-create").form()){var i=$("#"+t+"-create #documentDate").val(),d=$("#"+t+"-create #postingDate").val(),s=$("#"+t+"-create #reference").val(),u=parseFloat($("#"+t+"-create #amount").val()).toFixed(2),p=$("#"+t+"-create #text").val(),m=$("#"+t+"-create #companyCode").val(),v=$("#"+t+"-create #companyName").val(),f=$("#"+t+"-create #currency").val(),y=$("#"+t+"-create #totalDebit").val(),g=$("#"+t+"-create #totalCredit").val(),b=[],_=$("#"+t+"-create-tbody").children("tr");_.each(function(){var e={};e.glID=$(this).children(".row-gl").children("select").val(),e.dcEntry=$(this).children(".row-dc").children("select").val(),e.jAmount=$(this).children(".row-amount").children("input").val(),e.costCenter=$(this).children(".row-cost").children("input").val(),e.jAmount&&(e.glID&&e.dcEntry&&e.costCenter?(console.log(e),b.push(e)):b=[])}),y==g&&g==u?b.length?$.ajax({type:"POST",url:"/"+n+"-"+l,data:{account:c,documentDate:i,postingDate:d,reference:s,amount:u,text:p,companyCode:m,companyName:v,currency:f,debit:y,credit:g,transactionType:c,jlEntry:b,docID:r},success:function(o){o.redirect?($("#"+t+"-create-label").removeClass("d-none").addClass("alert-success").fadeIn().text(o.message),$("#"+t+"-save-btn").addClass("d-none"),$("#"+t+"-back-btn").removeClass("d-none")):e(t+"-create-label",JSON.stringify(o.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):e(t+"-create-label","Incomplete row found!","alert-danger"):(console.log("Not equal"),e(t+"-create-label","Total Amount, Debit and Credit Values are not equal","alert-danger"))}}(o):e(t+"-create-label","Posting for the period is close.","alert-danger")}})},error:function(e){console.log(e)}})}function s(e,o){$("#showTransaction").removeClass("d-none"),e.transaction.parker!=e.userDetails._id&&"admin"!=e.userDetails.position||""==e.transaction.poster&&$("#rpvd-update-btn").removeClass("d-none"),"approver"!=e.userDetails.position&&"admin"!=e.userDetails.position||""==e.transaction.poster&&$("#rpvd-approve-btn").removeClass("d-none"),""!=e.transaction.poster&&e.userList.forEach(function(o){o._id==e.transaction.poster&&$("#rpvd-posted").removeClass("d-none").text("Posted by: "+o.fullname)}),e.userList.forEach(function(o){o._id==e.transaction.parker&&$("#rpvd-parked").text("Parked by: "+o.fullname)}),$("#rpvd-create #transactionType").val(e.transaction.transactionType.toLowerCase()),$("#rpvd-create #reference").val(e.transaction.reference),$("#rpvd-create #currency").val(e.transaction.currency),$("#rpvd-create #documentDate").val(e.transaction.documentDate.substring(0,10)),$("#rpvd-create #postingDate").val(e.transaction.postingDate.substring(0,10)),$("#rpvd-create #amount").val(e.transaction.amount),$("#rpvd-create #text").val(e.transaction.text),$("#rpvd-create #documentNumber").val(e.transaction.documentNumber).prop("readonly",!0),$("#rpvd-create #documentID").val(e.transaction._id),$("#rpvd-create #companyCode").val(e.transaction.companyCode);var t={formID:"rpvd-create"};t.selectedCompanyCode=$("#rpvd-create #companyCode").val(),t.account=$("#rpvd-create #transactionType").val(),t.companyName=e.transaction.companyName,r(t),$("#vdTable-form").removeClass("d-none"),$("#dcForm").removeClass("d-none"),$("#dcForm #totalDebit").val(parseFloat(e.transaction.debit).toFixed(2)),$("#dcForm #totalCredit").val(parseFloat(e.transaction.credit).toFixed(2)),$("#rpvd-create-tbody").append(function(e,o){var t=e.transaction.jEntry,a=(t.length,[]),c=0;return t.forEach(function(t){var r="";r+="<tr>",r+="<td class='row-gl'>",r+="<select name='' class='gl_Account' > ",r+="<option selected disabled>Choose..</option>",o.forEach(function(o){"admin"==e.userDetails.position?(r+="<option value='"+o._id+"' >"+o.glAccount+" - "+o.glName+"</option>",t.glID==o._id&&(r+="<option selected  value='"+t.glID+"' >"+o.glAccount+" - "+o.glName+"</option>")):o.companyCode.forEach(function(a){e.transaction.companyCode.toString()==a.toString()&&(t.glID==o._id?r+="<option selected  value='"+t.glID+"' >"+o.glAccount+" - "+o.glName+"</option>":r+="<option value='"+o._id+"' >"+o.glAccount+" - "+o.glName+"</option>")})}),r+="</td>",o.forEach(function(e){e._id==t.glID&&(r+="<td class='row-index'><input type='text' value='"+e.glName+"' /></td>")}),r+="<td class='row-dc'> <select class='dc'>","debit"==t.dcEntry?r+="<option value='debit' selected>Debit</option> <option value='credit'>Credit</option></select></td>":"credit"==t.dcEntry&&(r+="<option value='debit' >Debit</option> <option value='credit' selected>Credit</option></select></td>"),r+="<td class='row-amount'><input type='text' class='gl_Amount' value='"+t.jAmount+"' /></td>",r+="<td class='row-cost'><input type='text' value='"+t.costCenter+"' /></td>",r+="</tr>",a[c]=r,c++}),a}(e,o))}function u(e){var o=[],t=0;return e.glAccount.forEach(function(a){t++;var c=[];a.companyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&c.push(e.code)})}),o.push([t,a.glAccount,a.glName,c])}),o}function p(e){var o=[],t=0;return e.vendor.forEach(function(a){t++;var c=[];a.vendorCompanyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&c.push(e.code)})}),o.push([t,a.vendorCode,a.vendorName,c])}),o}function m(e){var o=[],t=0;return e.customer.forEach(function(a){t++;var c=[];a.customerCompanyCode.forEach(function(o){e.companyCode.forEach(async function(e){o==e._id&&c.push(e.code)})}),o.push([t,a.customerCode,a.customerName,c])}),o}$("#companyCodeTable").DataTable(),$("#accountTypeTable").DataTable(),$("#accountGroupTable").DataTable(),$("#glSeriesTable").DataTable(),$("#usersTable").DataTable(),$("#privTable").DataTable(),$("#periodTable").DataTable(),$("#reportTable").DataTable(),$(".documentDate").prop("max",(new Date).toISOString().split("T")[0]),$("#usersTable").on("click","tr",function(){c("users-create"),o("onSelectDiv","users-create"),$("#users-create #userID").val($(this).find("td")[0].innerText),$("#users-create #userCompanyCode").val($(this).find("td")[1].innerText.split(",")),$("#users-create #fullname").val($(this).find("td")[2].innerText),$("#users-create #username").attr("readonly","readonly").val($(this).find("td")[3].innerText),$("#users-create #position").val($(this).find("td")[4].innerText)}),$("#users-clearbtn").click(function(e){c("users-create"),$("#users-create #onSelectDiv").addClass("d-none"),$("#users-create #username").removeAttr("readonly")}),$("#users-addbtn").click(function(o){if(a("users-create").form()){var t=$("#fullname").val(),c=$("#position").val(),r=$("#username").val(),n=$("#password").val(),l=$("#userCompanyCode").val();n===$("#retypepassword").val()?$.ajax({type:"POST",url:"/us-create",data:{username:r,fullname:t,position:c,password:n,companyCode:l},success:function(o){o.redirect?(e("users-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("users-label","Unauthorized!"==o?"Unauthorized user!":JSON.stringify(o.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):e("users-label","Passwords does not match!","alert-danger")}}),$("#users-updatebtn").click(function(o){if(a("users-create").form()){var t=$("#userID").val(),c=$("#fullname").val(),r=$("#position").val(),n=$("#userCompanyCode").val(),l=$("#username").val(),i=$("#password").val(),d=$("#retypepassword").val();""==t?e("users-label","Error! Select a user from table.","alert-danger"):i==d?$.ajax({type:"PATCH",url:"/us-create",data:{userId:t,fullname:c,position:r,username:l,password:i,companyCode:n},success:function(o){o.redirect?(e("users-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("users-label","Unauthorized!"==o?"Unauthorized user!":JSON.stringify(o.errorMessage),"alert-danger")},error:function(e){console.log(e)}}):e("users-label","Passwords does not match!","alert-danger")}}),$("#privTable").on("click","tr",function(){c("privileges-form"),$("#privileges-form #positionID").val($(this).find("td")[0].innerText),$("#privileges-form #privPosition").val($(this).find("td")[1].innerText),"Yes"==$(this).find("td")[2].innerText?$("#privileges-form #parkPriv").prop("checked",!0):$("#privileges-form #parkPriv").prop("checked",!1),"Yes"==$(this).find("td")[3].innerText?$("#privileges-form #postPriv").prop("checked",!0):$("#privileges-form #postPriv").prop("checked",!1)}),$("#priv-clearbtn").click(function(e){c("privileges-form")}),$("#priv-addbtn").click(function(o){if(a("privileges-form").form()){var t=$("#privPosition").val().toLowerCase(),c=0,r=0;$("#postPriv").prop("checked")&&(c=1),$("#parkPriv").prop("checked")&&(r=1),$.ajax({type:"POST",url:"/us-privilege",data:{position:t,post:c,park:r},success:function(o){o.redirect?(e("privilege-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("privilege-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#priv-updatebtn").click(function(o){if(a("privileges-form").form()){var t=$("#privPosition").val().toLowerCase(),c=$("#positionID").val(),r=0,n=0;""==c?e("privilege-label","Error! Select a position from table.","alert-danger"):($("#postPriv").prop("checked")&&(r=1),$("#parkPriv").prop("checked")&&(n=1),$.ajax({type:"PATCH",url:"/us-privilege",data:{positionID:c,position:t,post:r,park:n},success:function(o){o.redirect?(e("privilege-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("privilege-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}}))}}),$("#companyCodeTable").on("click","tr",function(){o("onSelectDiv","ccode"),$("#ccode #selectedCompanyCode").val($(this).find("td")[1].innerText),$("#ccode #company_codeID").val($(this).find("td")[0].innerText),$("#ccode #company_code").val($(this).find("td")[1].innerText),$("#ccode #company_name").val($(this).find("td")[2].innerText),$("#ccode #company_country").val($(this).find("td")[3].innerText),$("#ccode #company_currency").val($(this).find("td")[4].innerText)}),$("#ccode-clearbtn").click(function(e){c("ccode"),t("#ccode #onSelectDiv")}),$("#ccode-addbtn").click(function(o){if(a("ccode").form()){var t=$("#company_codeID").val(),c=$("#company_code").val(),r=$("#company_name").val(),n=$("#company_country").val(),l=$("#company_currency").val();$.ajax({type:"POST",url:"/gn-companycode",data:{company_codeID:t,company_code:c,company_name:r,company_country:n,company_currency:l},success:function(o){o.redirect?(e("ccode-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("ccode-label",o.errorMessage,"alert-danger"):e("ccode-label","Company code exists!","alert-danger")},error:function(e){console.log(e)}})}}),$("#ccode-updatebtn").click(function(o){if(a("ccode").form()){var t=$("#company_codeID").val(),c=$("#company_code").val(),r=$("#company_name").val(),n=$("#company_country").val(),l=$("#company_currency").val();""==t?e("ccode-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gn-companycode",data:{company_codeID:t,company_code:c,company_name:r,company_country:n,company_currency:l},success:function(o){o.redirect?(e("ccode-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("ccode-label","error "+o.errorMessage,"alert-danger"):e("ccode-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ccode-deletebtn").click(function(o){if(a("ccode").form()){var t=$("#company_codeID").val();""==t?e("ccode-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gn-companycode",data:{company_codeID:t},success:function(o){o.redirect?(e("ccode-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error&&e("ccode-label","error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#periodTable").on("click","tr",function(){$("#periodID").val($(this).find("td")[0].innerText),$("#period_accountType").val($(this).find("td")[1].innerText),$("#period_companycode").val($(this).find("td")[3].innerText),$("#period_fromAccount").val($(this).find("td")[4].innerText),$("#period_toAccount").val($(this).find("td")[5].innerText),$("#period_fromPeriod").val($(this).find("td")[6].innerText),$("#period_toPeriod").val($(this).find("td")[7].innerText),$("#period_year").val($(this).find("td")[8].innerText),$("#period_status").val($(this).find("td")[9].innerText)}),$("#period-clearbtn").click(function(e){c("controlPeriod")}),$("#period-addbtn").click(function(o){if(a("controlPeriod").form()){var t=$("#period_accountType").val(),c=$("#period_companycode").val(),r=$("#period_fromAccount").val(),n=$("#period_toAccount").val(),l=$("#period_fromPeriod").val(),i=$("#period_toPeriod").val(),d=$("#period_year").val(),s=$("#period_status").val();$.ajax({type:"POST",url:"/gn-control",data:{accountType:t,companyCode:c,fromAccount:r,toAccount:n,fromPeriod:l,toPeriod:i,controlYear:d,status:s},success:function(o){o.redirect?(e("period-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("period-label",o.errorMessage,"alert-danger"):e("period-label","Control exists!","alert-danger")},error:function(e){console.log(e)}})}}),$("#period-updatebtn").click(function(o){if(a("controlPeriod").form()){var t=$("#periodID").val(),c=$("#period_accountType").val(),r=$("#period_companycode").val(),n=$("#period_fromAccount").val(),l=$("#period_toAccount").val(),i=$("#period_fromPeriod").val(),d=$("#period_toPeriod").val(),s=$("#period_year").val(),u=$("#period_status").val();""==t?e("period-label","Error! Select period from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gn-control",data:{periodID:t,accountType:c,companyCode:r,fromAccount:n,toAccount:l,fromPeriod:i,toPeriod:d,controlYear:s,status:u},success:function(o){o.redirect?(e("period-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("period-label","error "+o.errorMessage,"alert-danger"):e("period-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#period-deletebtn").click(function(o){if(a("controlPeriod").form()){var t=$("#periodID").val();""==t?e("period-label","Error! Select period from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gn-control",data:{periodID:t},success:function(o){o.redirect?(e("period-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error&&e("period-label","error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accountTypeTable").on("click","tr",function(){o("onSelectDiv","acctype"),$("#acctype #selectedAccountType").val($(this).find("td")[1].innerText),$("#acctype #accountTypeID").val($(this).find("td")[0].innerText),$("#acctype #account_type").val($(this).find("td")[1].innerText),$("#acctype #accountTypeRangeFrom").val($(this).find("td")[2].innerText),$("#acctype #accountTypeRangeTo").val($(this).find("td")[3].innerText)}),$("#acctype-clearbtn").click(function(e){c("acctype"),t("#acctype #onSelectDiv")}),$("#acctype-addbtn").click(function(o){if(a("acctype").form()){var t=$("#account_type").val(),c=$("#accountTypeRangeFrom").val(),r=$("#accountTypeRangeTo").val();$.ajax({type:"POST",url:"/gl-accounttype",data:{account_type:t,accountTypeRangeFrom:c,accountTypeRangeTo:r},success:function(o){o.redirect?(e("acctype-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("acctype-label",o.errorMessage,"alert-danger"):e("acctype-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#acctype-updatebtn").click(function(o){if(a("acctype").form()){var t=$("#account_type").val(),c=$("#accountTypeID").val(),r=$("#accountTypeRangeFrom").val(),n=$("#accountTypeRangeTo").val();""==c?e("acctype-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-accounttype",data:{account_typeID:c,account_type:t,accountTypeRangeFrom:r,accountTypeRangeTo:n},success:function(o){o.redirect?(e("acctype-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("acctype-label","error "+o.errorMessage,"alert-danger"):e("acctype-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#acctype-deletebtn").click(function(o){if(a("acctype").form()){var t=$("#accountTypeID").val();""==t?e("acctype-label","Error! Select company code from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-accounttype",data:{account_typeID:t},success:function(o){o.redirect?(e("acctype-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error&&e("acctype-label","error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accountGroupTable").on("click","tr",function(){o("onSelectDiv","accgroup"),$("#accgroup #selectedAccountGroup").val($(this).find("td")[1].innerText),$("#accgroup #accountGroupID").val($(this).find("td")[0].innerText),$("#accgroup #accountGroupName").val($(this).find("td")[1].innerText),$("#accgroup #accGroup_typeID").val($(this).find("td")[2].innerText)}),$("#accgroup-clearbtn").click(function(e){c("accgroup"),t("#accgroup #onSelectDiv")}),$("#accgroup-addbtn").click(function(o){if(a("accgroup").form()){var t=$("#accGroup_typeID").val(),c=$("#accountGroupName").val();$.ajax({type:"POST",url:"/gl-accountgroup",data:{accountGrouptypeID:t,accountGroupName:c},success:function(o){o.redirect?(e("accgroup-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("accgroup-label",o.errorMessage,"alert-danger"):e("accgroup-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accgroup-updatebtn").click(function(o){if(a("accgroup").form()){var t=$("#accountGroupID").val(),c=$("#accGroup_typeID").val(),r=$("#accountGroupName").val();""==t?e("accgroup-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-accountgroup",data:{accountGroupID:t,accountGrouptypeID:c,accountGroupName:r},success:function(o){o.redirect?(e("accgroup-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("accgroup-label","error "+o.errorMessage,"alert-danger"):e("accgroup-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#accgroup-deletebtn").click(function(o){if(a("accgroup").form()){var t=$("#accountGroupID").val(),c=$("#accGroup_typeID").val();""==t?e("accgroup-label","Error! Select account type from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-accountgroup",data:{accountGroupID:t,accountGrouptypeID:c},success:function(o){o.redirect?(e("accgroup-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error&&e("accgroup-label","error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeriesTable").on("click","tr",function(){o("onSelectDiv","glSeries"),$("#glSeries #selectedGlSeries").val($(this).find("td")[1].innerText),$("#glSeries #glSeries_id").val($(this).find("td")[0].innerText),$("#glSeries #accountGL").val($(this).find("td")[1].innerText),$("#glSeries #seriesGL").val($(this).find("td")[2].innerText)}),$("#glSeries-clearbtn").click(function(e){c("glSeries"),t("#glSeries #onSelectDiv")}),$("#glSeries-addbtn").click(function(o){if(a("glSeries").form()){var t=$("#accountGL").val(),c=$("#seriesGL").val();$.ajax({type:"POST",url:"/gl-series",data:{accountGl:t,seriesGl:c},success:function(o){o.redirect?(e("glSeries-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("glSeries-label",o.errorMessage,"alert-danger"):e("glSeries-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeries-updatebtn").click(function(o){if(a("glSeries").form()){var t=$("#accountGL").val(),c=$("#seriesGL").val();""==$("#glSeries_id").val()?e("glSeries-label","Error! Select account from table.","alert-danger"):$.ajax({type:"PATCH",url:"/gl-series",data:{accountGl:t,seriesGl:c},success:function(o){o.redirect?(e("glSeries-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error?e("glSeries-label","error "+o.errorMessage,"alert-danger"):e("glSeries-label",o.message,"alert-danger")},error:function(e){console.log(e)}})}}),$("#glSeries-deletebtn").click(function(o){if(a("glSeries").form()){var t=$("#glSeries_id").val();""==t?e("glSeries-label","Error! Select account from table.","alert-danger"):$.ajax({type:"DELETE",url:"/gl-series",data:{glSeries_id:t},success:function(o){o.redirect?(e("glSeries-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):o.error&&e("glSeries-label","error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-create #acc_type").change(function(e){var o=$("#gl-create #acc_type").val();o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){var t=e.accountType_list;$("#gl-create #acc_group").empty(),$("#gl-create #acc_group").append("<option selected disabled> Choose... </option>"),t.forEach(function(e){e._id==o&&e.accountGroup.forEach(function(e){$("#gl-create #acc_group").append('<option value="'+e._id+'">'+e.accountGroup+"</option>")})})},error:function(e){console.log(e)}})}),$("#gl-create-btn").click(function(o){if(a("gl-create").form()){var t=$("#gl-create #gl_account").val(),c=$("#gl-create #c_code").val(),r=$("#gl-create #acc_type").val(),n=$("#gl-create #acc_group").val(),l=$("#gl-create #gl_name").val(),i=$("#gl-create #acc_currency").val(),d=$("#gl-create #tax_category").val(),s=$("#gl-create #desc_short").val(),u=$("#gl-create #desc_long").val();$.ajax({type:"POST",url:"/md-gl",data:{glAccount:t,companyCode:c,accountType:r,accountGroup:n,glName:l,accountCurrency:i,taxCategory:d,descShort:s,descLong:u},success:function(o){o.redirect?(e("gl-create-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("gl-create-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-modify #gl_account").change(function(e){var o=$("#gl-modify #gl_account").val();o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){var t=e.glAccount_list,a=(e.companyCode_list,e.accountType_list);$("#gl-modify #acc_group").empty().append("<option selected disabled> Choose... </option>"),t.forEach(function(e){e._id==o&&($("#gl-modify #c_code").val(e.companyCode),$("#gl-modify #acc_type").val(e.accountType),a.forEach(function(o){e.accountType==o._id&&o.accountGroup.forEach(function(o){e.accountGroup==o._id?$("#gl-modify #acc_group").append('<option value="'+o._id+'" selected>'+o.accountGroup+"</option>"):$("#gl-modify #acc_group").append('<option value="'+o._id+'">'+o.accountGroup+"</option>")})}),$("#gl-modify #gl_name").val(e.glName),$("#gl-modify #acc_currency").val(e.accountCurrency),$("#gl-modify #desc_short").val(e.descShort),$("#gl-modify #desc_long").val(e.descLong))})},error:function(e){console.log(e)}})}),$("#gl-modify #acc_type").change(function(e){var o=$("#gl-modify #acc_type").val();o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){var t=e.accountType_list;$("#gl-modify #acc_group").empty(),$("#gl-modify #acc_group").append("<option selected disabled> Choose... </option>"),t.forEach(function(e){e._id==o&&e.accountGroup.forEach(function(e){$("#gl-modify #acc_group").append('<option value="'+e._id+'">'+e.accountGroup+"</option>")})})},error:function(e){console.log(e)}})}),$("#gl-modify #update-btn").click(function(o){if(a("gl-modify").form()){var t=$("#gl-modify #gl_account").val(),c=$("#gl-modify #c_code").val(),r=$("#gl-modify #acc_type").val(),n=$("#gl-modify #acc_group").val(),l=$("#gl-modify #gl_name").val(),i=$("#gl-modify #acc_currency").val(),d=$("#gl-modify #tax_category").val(),s=$("#gl-modify #desc_short").val(),u=$("#gl-modify #desc_long").val();$.ajax({type:"PATCH",url:"/md-gl",data:{glAccount:t,companyCode:c,accountType:r,accountGroup:n,glName:l,accountCurrency:i,taxCategory:d,descShort:s,descLong:u},success:function(o){o.redirect?(e("gl-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("gl-modify-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#gl-modify #delete-btn").click(function(o){var t=$("#gl-modify #gl_account").val();null===t?e("gl-modify-label","Error! Please select GL Account you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-gl",data:{glAccount:t},success:function(o){o.redirect?(e("gl-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("gl-modify-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#vd-create-btn").click(function(o){if(a("vd-create").form()){var t=$("#vd-create #vd_code").val(),c=$("#vd-create #vd_name").val(),r=$("#vd-create #vd_companycode").val(),n=$("#vd-create #vd_currency").val(),l=$("#vd-create #vd_taxcategory").val(),i=$("#vd-create #vd_term").val(),d=$("#vd-create #vd_tax").val(),s=$("#vd-create #vd_recon").val(),u=$("#vd-create #vd_street").val(),p=$("#vd-create #vd_city").val(),m=$("#vd-create #vd_country").val(),v=$("#vd-create #vd_postalcode").val(),f=$("#vd-create #vd_telephone").val(),y=$("#vd-create #vd_email").val(),g=$("#vd-create #vd_website").val();$.ajax({type:"POST",url:"/md-vendor",data:{vendorCode:t,vendorName:c,vendorCompanyCode:r,vendorCurrency:n,vendorTaxCategory:l,vendorPaymentTerm:i,vendorTax:d,vendorRecon:s,vendorStreet:u,vendorCity:p,vendorCountry:m,vendorPostalCode:v,vendorTelephone:f,vendorEmail:y,vendorWebsite:g},success:function(o){o.redirect?(e("vd-create-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("vd-create-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#vd-modify #vd_code").change(function(e){var o=$("#vd-modify #vd_code").val();o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){e.vendor_List.forEach(function(e){e._id==o&&($("#vd-modify #vd_name").val(e.vendorName),$("#vd-modify #vd_companycode").val(e.vendorCompanyCode),$("#vd-modify #vd_currency").val(e.vendorCurrency),$("#vd-modify #vd_taxcategory").val(e.vendorTaxCategory),$("#vd-modify #vd_term").val(e.vendorPaymentTerm),$("#vd-modify #vd_tax").val(e.vendorTax),$("#vd-modify #vd_recon").val(e.vendorRecon),$("#vd-modify #vd_street").val(e.vendorStreet),$("#vd-modify #vd_city").val(e.vendorCity),$("#vd-modify #vd_country").val(e.vendorCountry),$("#vd-modify #vd_postalcode").val(e.vendorPostalCode),$("#vd-modify #vd_telephone").val(e.vendorTelephone),$("#vd-modify #vd_email").val(e.vendorEmail),$("#vd-modify #vd_website").val(e.vendorWebsite))})},error:function(e){console.log(e)}})}),$("#vd-modify #update-btn").click(function(o){if(a("vd-modify").form()){var t=$("#vd-modify #vd_code").val(),c=$("#vd-modify #vd_name").val(),r=$("#vd-modify #vd_companycode").val(),n=$("#vd-modify #vd_currency").val(),l=$("#vd-modify #vd_taxcategory").val(),i=$("#vd-modify #vd_term").val(),d=$("#vd-modify #vd_tax").val(),s=$("#vd-modify #vd_recon").val(),u=$("#vd-modify #vd_street").val(),p=$("#vd-modify #vd_city").val(),m=$("#vd-modify #vd_country").val(),v=$("#vd-modify #vd_postalcode").val(),f=$("#vd-modify #vd_telephone").val(),y=$("#vd-modify #vd_email").val(),g=$("#vd-modify #vd_website").val();$.ajax({type:"PATCH",url:"/md-vendor",data:{vendorCode:t,vendorName:c,vendorCompanyCode:r,vendorCurrency:n,vendorTaxCategory:l,vendorPaymentTerm:i,vendorTax:d,vendorRecon:s,vendorStreet:u,vendorCity:p,vendorCountry:m,vendorPostalCode:v,vendorTelephone:f,vendorEmail:y,vendorWebsite:g},success:function(o){o.redirect?(e("vd-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("vd-modify-label","Unauthorized!"==o?"Unauthorized user!":"error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#vd-modify #delete-btn").click(function(o){var t=$("#vd-modify #vd_code").val();""==t?e("vd-modify-label","Error! Please select Vendor Code you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-vendor",data:{vendorCode:t},success:function(o){o.redirect?(e("vd-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("vd-modify-label","Unauthorized!"==o?"Unauthorized user!":"error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#ct-create-btn").click(function(o){if(a("ct-create").form()){var t=$("#ct-create #ct_code").val(),c=$("#ct-create #ct_name").val(),r=$("#ct-create #ct_companycode").val(),n=$("#ct-create #ct_currency").val(),l=$("#ct-create #ct_taxcategory").val(),i=$("#ct-create #ct_term").val(),d=$("#ct-create #ct_tax").val(),s=$("#ct-create #ct_recon").val(),u=$("#ct-create #ct_street").val(),p=$("#ct-create #ct_city").val(),m=$("#ct-create #ct_country").val(),v=$("#ct-create #ct_postalcode").val(),f=$("#ct-create #ct_telephone").val(),y=$("#ct-create #ct_email").val(),g=$("#ct-create #ct_website").val();$.ajax({type:"POST",url:"/md-customer",data:{customerCode:t,customerName:c,customerCompanyCode:r,customerCurrency:n,customerTaxCategory:l,customerPaymentTerm:i,customerTax:d,customerRecon:s,customerStreet:u,customerCity:p,customerCountry:m,customerPostalCode:v,customerTelephone:f,customerEmail:y,customerWebsite:g},success:function(o){o.redirect?(e("ct-create-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("ct-create-label","Unauthorized!"==o?"Unauthorized user!":o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ct-modify #ct_code").change(function(e){var o=$("#ct-modify #ct_code").val();o&&$.ajax({type:"GET",url:"/main-list",data:{},success:function(e){e.customer_List.forEach(function(e){e._id==o&&($("#ct-modify #ct_name").val(e.customerName),$("#ct-modify #ct_companycode").val(e.customerCompanyCode),$("#ct-modify #ct_currency").val(e.customerCurrency),$("#ct-modify #ct_taxcategory").val(e.customerTaxCategory),$("#ct-modify #ct_term").val(e.customerPaymentTerm),$("#ct-modify #ct_tax").val(e.customerTax),$("#ct-modify #ct_recon").val(e.customerRecon),$("#ct-modify #ct_street").val(e.customerStreet),$("#ct-modify #ct_city").val(e.customerCity),$("#ct-modify #ct_country").val(e.customerCountry),$("#ct-modify #ct_postalcode").val(e.customerPostalCode),$("#ct-modify #ct_telephone").val(e.customerTelephone),$("#ct-modify #ct_email").val(e.customerEmail),$("#ct-modify #ct_website").val(e.customerWebsite))})},error:function(e){console.log(e)}})}),$("#ct-modify #update-btn").click(function(o){if(a("ct-modify").form()){var t=$("#ct-modify #ct_code").val(),c=$("#ct-modify #ct_name").val(),r=$("#ct-modify #ct_companycode").val(),n=$("#ct-modify #ct_currency").val(),l=$("#ct-modify #ct_taxcategory").val(),i=$("#ct-modify #ct_term").val(),d=$("#ct-modify #ct_tax").val(),s=$("#ct-modify #ct_recon").val(),u=$("#ct-modify #ct_street").val(),p=$("#ct-modify #ct_city").val(),m=$("#ct-modify #ct_country").val(),v=$("#ct-modify #ct_postalcode").val(),f=$("#ct-modify #ct_telephone").val(),y=$("#ct-modify #ct_email").val(),g=$("#ct-modify #ct_website").val();$.ajax({type:"PATCH",url:"/md-customer",data:{customerCode:t,customerName:c,customerCompanyCode:r,customerCurrency:n,customerTaxCategory:l,customerPaymentTerm:i,customerTax:d,customerRecon:s,customerStreet:u,customerCity:p,customerCountry:m,customerPostalCode:v,customerTelephone:f,customerEmail:y,customerWebsite:g},success:function(o){o.redirect?(e("ct-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("ct-modify-label","Unauthorized!"==o?"Unauthorized user!":"error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#ct-modify #delete-btn").click(function(o){var t=$("#ct-modify #ct_code").val();""==t?e("ct-modify-label","Error! Please select Customer Code you want to delete.","alert-danger"):$.ajax({type:"DELETE",url:"/md-customer",data:{customerCode:t},success:function(o){o.redirect?(e("ct-modify-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("ct-modify-label","Unauthorized!"==o?"Unauthorized user!":"error "+o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#acgl-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#acgl-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#apvi-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#apvi-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#arci-create #totalDebit").val(parseFloat(0).toFixed(2)),$("#arci-create #totalCredit").val(parseFloat(0).toFixed(2)),$("#acgl-create #companyCode").change(function(e){var o={formID:"acgl-create"};o.selectedCompanyCode=$("#acgl-create #companyCode").val(),o.account="gl",r(o)}),$("#arci-create #companyCode").change(function(e){var o={formID:"arci-create"};o.selectedCompanyCode=$("#arci-create #companyCode").val(),o.account="customer",r(o)}),$("#apvi-create #companyCode").change(function(e){var o={formID:"apvi-create"};o.selectedCompanyCode=$("#apvi-create #companyCode").val(),o.account="vendor",r(o)}),$("#rpvd-create #companyCode").change(function(e){var o={formID:"rpvd-create"};o.selectedCompanyCode=$("#rpvd-create #companyCode").val(),o.account=$("#rpvd-create #transactionType").val(),r(o)}),$("#acgl-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),l(0,e)}),$("#arci-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),l(0,e)}),$("#apvi-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),l(0,e)}),$("#rpvd-create-tbody").on("change",".gl_Account",function(){var e={};e.child=$(this).closest("tr"),e.theValue=$(this).val(),l(0,e)}),$("#acgl-create-tbody").on("keyup",".gl_Amount",function(){i("acgl")}),$("#arci-create-tbody").on("keyup",".gl_Amount",function(){i("arci")}),$("#apvi-create-tbody").on("keyup",".gl_Amount",function(){i("apvi")}),$("#rpvd-create-tbody").on("keyup",".gl_Amount",function(){i("rpvd","dcForm")}),$("#acgl-addItem").on("click",function(){n("acgl",$("#acgl-create #companyCode").val())}),$("#arci-addItem").on("click",function(){n("arci",$("#arci-create #companyCode").val())}),$("#apvi-addItem").on("click",function(){n("apvi",$("#apvi-create #companyCode").val())}),$("#rpvd-addItem").on("click",function(){n("rpvd",$("#rpvd-create #companyCode").val())}),$("#acgl-save-btn").click(function(e){var o={formID:"acgl",account:"gl"};a(o.formID+"-create").form()&&d(o)}),$("#arci-save-btn").click(function(e){var o={formID:"arci",account:"customer"};a(o.formID+"-create").form()&&d(o)}),$("#apvi-save-btn").click(function(e){var o={formID:"apvi",account:"vendor"};a(o.formID+"-create").form()&&d(o)}),$("#acgl-back-btn").click(function(e){location.reload()}),$("#arci-back-btn").click(function(e){location.reload()}),$("#apvi-back-btn").click(function(e){location.reload()}),$("#rp-searchDocKeys #search-btn").click(function(o){if(a("rp-searchDocKeys").form()){var t=$("#rp-searchDocKeys #searchdocumentNumber").val(),c=$("#rp-searchDocKeys #searchcompanyCode").val(),r=$("#rp-searchDocKeys #searchyear").val(),n=0,l={};$.ajax({type:"GET",url:"/main-list",data:{},success:function(o){console.log(o);var a=o.glTransaction_List,i=o.glAccount_list;l.userList=o.user_List,l.userDetails=o.user,a.forEach(function(e){t==e.documentNumber&&r==new Date(e.documentDate).getFullYear()&&c==e.companyCode&&(n=1,l.transaction=e)}),n?($("#searchForm").addClass("d-none"),s(l,i)):e("rp-searchDocKeys-label","No document found.","alert-danger")},error:function(e){console.log(e)}})}}),$("#rp-searchDocRef #refsearch-btn").click(function(o){if(a("rp-searchDocRef").form()){var t=$("#rp-searchDocRef #documentReference").val(),c=0,r={};$.ajax({type:"GET",url:"/main-list",data:{},success:function(o){var a=o.glTransaction_List,n=o.glAccount_list;r.userList=o.user_List,r.userDetails=o.user,a.forEach(function(e){t==e.reference&&(c++,r.transaction=e)}),1==c?($("#searchForm").addClass("d-none"),s(r,n)):e("rp-searchDocRef-label",c>1?"Duplicate reference found.Please try using other search method.":"No document found.","alert-danger")},error:function(e){console.log(e)}})}}),$("#rpvd-update-btn").click(function(e){var o={formID:"rpvd"};o.account=$("#rpvd-create #transactionType").val(),o.docID=$("#rpvd-create #documentID").val(),a(o.formID+"-create").form()&&d(o)}),$("#rpvd-approve-btn").click(function(o){var t=$("#rpvd-create #documentID").val();$.ajax({type:"PATCH",url:"/rp-vd",data:{documentID:t},success:function(o){o.redirect?(e("rpvd-create-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("rpvd-create-label",o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}),$("#genDocSeq-btn").click(function(o){if(a("genDocSeq").form()){var t=$("#genDocSeq #genYear").val();$.ajax({type:"POST",url:"/gl-sequence",data:{year:t},success:function(o){o.redirect?(e("docSeq-label",o.message,"alert-success"),window.setTimeout(function(){window.location=o.redirectURL},1e3)):e("docSeq-label",o.errorMessage,"alert-danger")},error:function(e){console.log(e)}})}}),$("#rpvd-back-btn").click(function(e){location.reload()}),$("#rpmd-select").change(function(e){var o=e.target.value,t={},a=[{title:"#"},{title:"GL Account"},{title:"GL Name"},{title:"Company Code"}],c=[{title:"#"},{title:"Vendor Code"},{title:"Vendor Name"},{title:"Company Code"}],r=[{title:"#"},{title:"Customer Code"},{title:"Customer Name"},{title:"Company Code"}];$.ajax({type:"GET",url:"/main-list",success:function(e){"GL"==o?($.fn.DataTable.isDataTable("#vendorReportTable")&&$("#vendorReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#customerReportTable")&&$("#customerReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#vendorReportTable").addClass("d-none"),$("#customerReportTable").addClass("d-none"),$("#glReportTable").removeClass("d-none"),t.glAccount=e.glAccount_list,t.companyCode=e.companyCode_list,$("#glReportTable").DataTable({columns:a,data:u(t),retrieve:!0})):"Vendor"==o?($.fn.DataTable.isDataTable("#glReportTable")&&$("#glReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#customerReportTable")&&$("#customerReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#glReportTable").addClass("d-none"),$("#customerReportTable").addClass("d-none"),$("#vendorReportTable").removeClass("d-none"),t.vendor=e.vendor_List,t.companyCode=e.companyCode_list,$("#vendorReportTable").DataTable({columns:c,data:p(t),retrieve:!0})):"Customer"==o&&($.fn.DataTable.isDataTable("#glReportTable")&&$("#glReportTable").DataTable().destroy(),$.fn.DataTable.isDataTable("#vendorReportTable")&&$("#vendorReportTable").DataTable().destroy(),$("#rpmd-table").removeClass("d-none"),$("#glReportTable").addClass("d-none"),$("#vendorReportTable").addClass("d-none"),$("#customerReportTable").removeClass("d-none"),t.customer=e.customer_List,t.companyCode=e.companyCode_list,$("#customerReportTable").DataTable({columns:r,data:m(t),retrieve:!0}))},error:function(e){console.log(e)}})})});